---
id: import-installation
title: Scope Import instructions
sidebar_label: Installation
---

## GitHub Actions

Add a step to your GitHub Actions workflow YAML that uses the [scope-import](https://github.com/marketplace/actions/scope-import) action:

```yaml
- name: Scope Import
    uses: undefinedlabs/scope-import-action@v1
    with:
      dsn: ${{ secrets.SCOPE_DSN }}
      path: path/to/test-reports
```

You can find further information of this action at the [GitHub Marketplace](https://github.com/marketplace/actions/scope-import).

## Manual

If you haven’t done it yet, install the Scope Import CLI running the following command in your local shell:

<!--DOCUSAURUS_CODE_TABS-->

<!--Linux/MacOS-->

```
curl -L https://home.undefinedlabs.com/download/scope-import/`uname -s`/`uname -m` -o /usr/local/bin/scope-import && chmod +x /usr/local/bin/scope-import
```

### Usage

```
scope-import --path path/to/test-reports
```

<!--Windows-->

```
wget https://home.undefinedlabs.com/download/scope-import/windows/x86_64 -OutFile c:\windows\system32\scope-import.exe
```

If you use a Windows 32bit machine, change the architecture in the URL to `i386`.

### Usage

```
scope-import.exe --path path/to/test-reports
```

<!--END_DOCUSAURUS_CODE_TABS-->

## Environment variables

The following environment variables need to be configured when instrumenting your application in testing or runtime modes:

| Environment variable | Testing mode | Runtime mode | Autodetected |
| -------------------- | ------------ | ------------ | :----------: |
| `SCOPE_DSN`          | Required     | Required     |      ✗       |
| `SCOPE_COMMIT_SHA`   | Required     | Optional     |      ✓       |
| `SCOPE_REPOSITORY`   | Required     | Optional     |      ✓       |
| `SCOPE_SOURCE_ROOT`  | Required     | Optional     |      ✓       |

### SCOPE_DSN

**This is required setting**. If not set, in testing mode tests will run as usual and an error message will be printed before
the process finishes pointing to the agent logs for troubleshooting. In runtime mode, the instrumented process
will be executed as usual, a warning message will be printed at the beginning of the execution and no spans will be reported.

`SCOPE_DSN` contains the Data Source Name with connection information about the Scope installation to report to. Specifically, it contains
the hostname of the Scope instance to report to, and the API key to be used for authentication.

Scope DSNs are generated per namespace. You can generate them by clicking on the `API Key` link of the namespace where
you want to report to in the Scope UI. If running locally using _Scope for Mac_ or _Scope for Windows_, the DSN will be
automatically configured by reading it from `~/.scope/config.json`, which is autogenerated when configuring the native application.

Example: `https://cbfeff1f5fbf444086c728a096020cad@app.scope.dev/`

### SCOPE_COMMIT_SHA

This is a required setting in testing mode, and optional in runtime mode.

`SCOPE_COMMIT_SHA` contains the commit hash to be used when reporting to Scope.

If not explicitly set, the agent will try to automatically detect it using the following algorithm:

1. If the process is being executed inside a [supported CI provider](import-compatibility.md#ci-providers), it will try
   to read the commit hash from the environment variable set by the CI provider.
2. If not, it will try to extract the current commit from the local git information (if `.git/` is present).

Example: `974c3566eb8e221d130db86a7ce1f99703fe2e69`

### SCOPE_REPOSITORY

This is a required setting in testing mode, and optional in runtime mode.

`SCOPE_REPOSITORY` contains the repository URL to be used when reporting to Scope.

If not explicitly set, the agent will try to automatically detect it using the following algorithm:

1. If the process is being executed inside a [supported CI provider](import-compatibility.md#ci-providers), it will try
   to read the repository URL from the environment variable set by the CI provider.
2. If not, it will try to extract the current `origin` remote URL from the local git information (if `.git/` is present).

Examples: `https://github.com/undefinedlabs/scope-docs.git`, `git@github.com:undefinedlabs/scope-docs.git`

### SCOPE_SOURCE_ROOT

This is a required setting in testing mode, and optional in runtime mode.

`SCOPE_SOURCE_ROOT` contains the absolute path to where the root of the project is located inside the filesystem. This
information is used to automatically show excerpts of source code in the Scope UI in stacktraces, in the "Code Path" tab,
etc.

If not explicitly set, the agent will try to automatically detect it using the following algorithm:

1. If the process is being executed inside a [supported CI provider](import-compatibility.md#ci-providers), it will try
   to read the source root from the environment variable set by the CI provider.
2. If not, it will try to extract the absolute path to the git repository using the local git information (if `.git/` is present).
3. If not, it will be set to the working directory of the command used to launch the application or tests.

Example: `/home/user/projects/scope-docs`

## Running tests inside a container

If you are running your application or tests inside a container, forward the following environment variables depending on your CI provider, so the agent can autodetect the build information.

> Note that you might need to also set `SCOPE_SOURCE_ROOT` manually with the absolute path inside the container where the code is present if it cannot be autodetected by the agent.

<!--DOCUSAURUS_CODE_TABS-->
<!-- Jenkins -->

- `SCOPE_DSN`
- `JENKINS_URL`
- `GIT_URL`
- `GIT_COMMIT`
- `BUILD_ID`
- `BUILD_NUMBER`
- `BUILD_URL`
- `GIT_BRANCH`

<!-- CircleCI -->

- `SCOPE_DSN`
- `CIRCLECI`
- `CIRCLE_REPOSITORY_URL`
- `CIRCLE_SHA1`
- `CIRCLE_BUILD_NUM`
- `CIRCLE_BUILD_URL`
- `CIRCLE_BRANCH`

<!-- GitLab CI -->

- `SCOPE_DSN`
- `GITLAB_CI`
- `CI_REPOSITORY_URL`
- `CI_COMMIT_SHA`
- `CI_JOB_ID`
- `CI_JOB_URL`
- `CI_COMMIT_BRANCH`
- `CI_COMMIT_REF_NAME`

<!-- Travis -->

- `SCOPE_DSN`
- `TRAVIS`
- `TRAVIS_REPO_SLUG`
- `TRAVIS_COMMIT`
- `TRAVIS_BUILD_ID`
- `TRAVIS_BUILD_NUMBER`

<!-- AppVeyor -->

- `SCOPE_DSN`
- `APPVEYOR`
- `APPVEYOR_REPO_NAME`
- `APPVEYOR_REPO_COMMIT`
- `APPVEYOR_BUILD_ID`
- `APPVEYOR_BUILD_NUMBER`
- `APPVEYOR_PROJECT_SLUG`
- `APPVEYOR_PULL_REQUEST_HEAD_REPO_BRANCH`
- `APPVEYOR_REPO_BRANCH`

<!-- Azure Pipelines -->

- `SCOPE_DSN`
- `TF_BUILD`
- `Build.Repository.Uri`
- `Build.SourceVersion`
- `Build.BuildId`
- `Build.BuildNumber`
- `System.TeamFoundationCollectionUri`
- `System.TeamProject`
- `Build.SourceBranchName`
- `Build.SourceBranch`

<!-- Bitbucket Pipelines -->

- `SCOPE_DSN`
- `BITBUCKET_GIT_SSH_ORIGIN`
- `BITBUCKET_COMMIT`
- `BITBUCKET_CLONE_DIR`
- `BITBUCKET_BUILD_NUMBER`
- `BITBUCKET_BRANCH`

<!-- GitHub Actions -->

- `SCOPE_DSN`
- `GITHUB_REPOSITORY`
- `GITHUB_SHA`
- `GITHUB_WORKSPACE`
- `GITHUB_RUN_ID`
- `GITHUB_RUN_NUMBER`
- `GITHUB_REF`

<!-- TeamCity -->

- `SCOPE_DSN`
- `TEAMCITY_VERSION`
- `BUILD_VCS_URL`
- `BUILD_CHECKOUTDIR`
- `BUILD_ID`
- `BUILD_NUMBER`
- `SERVER_URL`

<!-- Buildkite -->

- `SCOPE_DSN`
- `BUILDKITE`
- `BUILDKITE_REPO`
- `BUILDKITE_COMMIT`
- `BUILDKITE_BUILD_ID`
- `BUILDKITE_BUILD_NUMBER`
- `BUILDKITE_BUILD_URL`
- `BUILDKITE_BRANCH`

<!--END_DOCUSAURUS_CODE_TABS-->
